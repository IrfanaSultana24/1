<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>üëã A Little Goodbye ‚Äî Interactive</title>
<style>
:root{
  --bg1:#0f172a; --bg2:#1e293b;
  --card:#0b1220c0; --text:#e2e8f0; --border:#1f2a44;
  --accent:#f59e0b; --ok:#22c55e; --laser:#22d3ee;
}
html,body{height:100%;margin:0}
body{
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica Neue, Arial;
  color:var(--text);
  display:grid; place-items:center;
  background: radial-gradient(1200px 800px at 10% 10%, var(--bg2), var(--bg1));
  background-size: cover; background-position: center; background-attachment: fixed;
  overflow-x:hidden;
}
.card{
  position:relative; z-index:5; max-width:720px; width:min(92vw,720px);
  backdrop-filter: blur(12px);
  background: var(--card);
  border:1px solid var(--border); border-radius:20px;
  padding:28px 28px 20px;
  box-shadow:0 20px 40px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.05);
}
h1{ font-size: clamp(28px,5vw,44px); margin:8px 0 10px; line-height:1.1; }
.msg{ font-size: clamp(16px,2.6vw,20px); opacity:.92; margin:0 0 14px; }
.meta{ opacity:.8; font-size:14px; margin-top:6px; }
.row{ display:flex; flex-wrap:wrap; gap:10px; margin-top:18px; }
button{
  appearance:none; border:1px solid #334155; background:#0b1220; color:var(--text);
  padding:10px 14px; border-radius:12px; cursor:pointer; font-weight:600;
  transition: transform .08s ease, box-shadow .2s ease, border-color .2s ease;
}
button:hover{ border-color:#475569; box-shadow:0 8px 20px rgba(0,0,0,.25); transform:translateY(-1px); }

/* ===== Toolbelt ===== */
.toolbelt{
  position:fixed; right:14px; bottom:14px; z-index:6;
  background:#0b1220cc; border:1px solid var(--border); border-radius:14px; padding:10px 12px;
  display:flex; flex-wrap:wrap; gap:8px; align-items:center; backdrop-filter: blur(8px);
  font-size:12px;
}
.toolbelt .seg{ display:flex; gap:8px; align-items:center; }
.toolbelt .k{ opacity:.85; }

/* ===== Blueprint ===== */
.blueprint::before{
  content:""; position:fixed; inset:0; z-index:2; pointer-events:none;
  background:
    repeating-linear-gradient(0deg, rgba(0,255,255,.07) 0 1px, transparent 1px 24px),
    repeating-linear-gradient(90deg, rgba(0,255,255,.07) 0 1px, transparent 1px 24px);
}
.blueprint{
  filter: hue-rotate(170deg) saturate(1.1);
}

/* ===== Laser level ===== */
#laser{ position:fixed; left:0; width:100vw; height:2px; background:var(--laser);
  box-shadow:0 0 10px rgba(34,211,238,.8); z-index:4; display:none; }

/* ===== Measure tool ===== */
.measure-line{ position:fixed; z-index:4; border-top:2px dashed #94a3b8; }
.measure-badge{
  position:fixed; z-index:4; background:#0b1220; border:1px solid #475569; border-radius:10px;
  padding:4px 8px; font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; font-size:12px;
}

/* ===== Markers ===== */
.marker{ position:fixed; z-index:3; transform:translate(-50%,-100%); filter: drop-shadow(0 3px 6px rgba(0,0,0,.35)); }

/* ===== Crane & beam ===== */
#craneHook{ position:fixed; top:6vh; left:20vw; z-index:4; cursor:grab; user-select:none; font-size:34px; }
#craneHook.drag{ cursor:grabbing; }
.beam{
  position:fixed; z-index:3; left:0; top:0;
  width:220px; height:26px; line-height:26px; text-align:center;
  background:#1f2937; color:#ffe08a; border:2px solid #374151; border-radius:4px;
  box-shadow:0 6px 16px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.08);
  font-weight:700; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI;
}

/* ===== Emoji rain ===== */
.emoji { position:fixed; top:-60px; z-index:1; }
.emoji .inner{
  display:block; filter: drop-shadow(0 3px 6px rgba(0,0,0,.35));
  animation: sway 3.8s ease-in-out infinite;
}
@keyframes fall { to { transform: translateY(110vh); } }
@keyframes sway { 0%{ transform: translateX(0) rotate(0deg); }
                  50%{ transform: translateX(var(--sx, 24px)) rotate(var(--rot, 8deg)); }
                  100%{ transform: translateX(0) rotate(0deg); } }

/* Click feedback */
.sparkle{ position: fixed; z-index:4; pointer-events:none; color:#ffe08a; animation: upfade .8s ease-out forwards; }
.plus{ position: fixed; z-index:4; pointer-events:none; color:var(--accent); font-weight:700; animation: upfade .9s ease-out forwards; }
@keyframes upfade{ 0%{ transform: translateY(0) scale(.9); opacity:.95; } 100%{ transform: translateY(-28px) scale(1.15); opacity:0; } }

/* Applause */
.applause{ position: fixed; left:14px; bottom:14px; z-index:6; background:#0b1220cc; border:1px solid var(--border);
  border-radius:999px; padding:8px 12px; display:flex; gap:8px; align-items:center; backdrop-filter:blur(8px); font-weight:700; }
.applause .dot{ width:10px; height:10px; border-radius:50%; background:var(--accent); box-shadow:0 0 0 4px rgba(245,158,11,.15); }

/* Modal (feedback) */
.modal{ position:fixed; inset:0; display:none; z-index:10; align-items:center; justify-content:center; background:rgba(0,0,0,.45); padding:18px; }
.modal-card{ width:min(92vw,620px); background:#0b1220; border:1px solid var(--border); border-radius:16px; padding:18px; box-shadow:0 24px 60px rgba(0,0,0,.5); }

</style>
</head>
<body>
  <div id="laser"></div>
  <div class="card">
    <h1 id="title">Thank you, team!</h1>
    <p class="msg" id="message">It‚Äôs been a privilege to build, iterate, and ship with you. Wishing you smooth workflows and zero clashes ahead!</p>
    <p class="meta" id="signature">‚Äî Irfana</p>
    <div class="row">
      <button id="applauseBtn">üëè Applause</button>
      <button id="feedbackBtn">üí¨ Leave feedback</button>
    </div>
  </div>

  <!-- Toolbelt -->
  <div class="toolbelt" role="toolbar" aria-label="Tools">
    <div class="seg">
      <button id="bp">üìê Blueprint</button>
      <button id="laserBtn">üü¢ Laser</button>
      <button id="measureBtn">üìè Measure</button>
    </div>
    <div class="seg">
      <span class="k">‚Äî</span>
      <button id="markerBtn">üöß Mark</button>
      <button id="dropBtn">üèóÔ∏è Drop beam</button>
    </div>
  </div>

  <!-- Crane hook -->
  <div id="craneHook" title="Drag the hook">ü™ù</div>

  <!-- Applause counter -->
  <div class="applause" id="applauseBadge"><div class="dot"></div><span>Applause:</span><span id="applauseCount">0</span></div>

  <!-- Feedback Modal -->
  <div class="modal" id="modal">
    <div class="modal-card">
      <h2>üí¨ Share your feedback</h2>
      <textarea id="fbText" placeholder="Write a quick note..." style="width:100%;min-height:140px;background:#0f172a;color:var(--text);border:1px solid #334155;border-radius:12px;padding:10px;font-family:inherit;font-size:14px;"></textarea>
      <div class="row" style="margin-top:12px;justify-content:flex-end">
        <button id="cancel">Cancel</button>
        <button id="send">Send</button>
      </div>
    </div>
  </div>

  <!-- Hidden iframe for Google Form -->
  <iframe name="gform-target" style="display:none"></iframe>

<script>
/* ===== Params & basic text ===== */
const qs = new URLSearchParams(location.search);
const title = qs.get('title') || "Thank you, team!";
const msg   = qs.get('msg')   || "It‚Äôs been a privilege to build, iterate, and ship with you. Wishing you smooth workflows and zero clashes ahead!";
const name  = qs.get('name')  || "Irfana";
const bg    = qs.get('bg')    || "1.jpeg";
document.getElementById('title').textContent = title;
document.getElementById('message').textContent = msg;
document.getElementById('signature').textContent = `‚Äî ${name}`;
if (bg){ const url = bg.match(/^https?:\/\//)?bg:`${bg}`; document.body.style.backgroundImage = `url('${url}')`; }

/* ===== Helpers ===== */
function rand(min,max){ return Math.random()*(max-min)+min; }
function sparkleAt(x,y,txt="‚ú®",cls="sparkle"){
  const s=document.createElement('div'); s.className=cls; s.textContent=txt;
  s.style.left=x+"px"; s.style.top=y+"px"; s.style.fontSize=(cls==="plus"?"16px":(18+Math.random()*6)+"px");
  document.body.appendChild(s); setTimeout(()=>s.remove(),900);
}

/* ===== Emoji rain (construction pack) ===== */
const PACK = ["üë∑‚Äç‚ôÄÔ∏è","üèóÔ∏è","üöß","üß±","üîß","üëã","ü§ù","üëè"];
const MAX_ACTIVE=14, SPAWN_MS=1000, DUR_RANGE=[14,22];
let lane=0;
function lanes(){ const n=Math.max(11,Math.floor(innerWidth/110)), pad=1.5, step=(100-pad*2)/(n-1); return {n,pad,step}; }
function makeEmoji(xvw=null, y=-60){
  if(document.querySelectorAll('.emoji').length>=MAX_ACTIVE) return;
  const {n,pad,step}=lanes();
  if(xvw==null){ xvw = pad + lane*step + rand(-step*.2, step*.2); lane=(lane+1)%n; }
  const wrap=document.createElement('div'); wrap.className='emoji';
  const span=document.createElement('span'); span.className='inner'; span.textContent=PACK[Math.floor(Math.random()*PACK.length)];
  const dur=rand(DUR_RANGE[0],DUR_RANGE[1]), delay=rand(0,.8), size=rand(24,42), sway=(Math.random()<.5?-1:1)*rand(12,28), rot=(Math.random()<.5?-1:1)*rand(4,12)+"deg";
  wrap.style.left=xvw+"vw"; wrap.style.top=y+"px"; wrap.style.animation=`fall ${dur}s linear ${delay}s forwards`;
  span.style.fontSize=size+"px"; span.style.setProperty('--sx',sway+"px"); span.style.setProperty('--rot',rot);
  wrap.addEventListener('click',e=>{ const r=span.getBoundingClientRect(); sparkleAt(r.left+r.width/2,r.top,"+1","plus"); setTimeout(()=>wrap.remove(),120); });
  wrap.appendChild(span); document.body.appendChild(wrap);
  setTimeout(()=>wrap.remove(),(dur+delay+.6)*1000);
}
let emitter=setInterval(()=>makeEmoji(null),SPAWN_MS);

/* ===== Applause ===== */
let applause=0; const countEl=document.getElementById('applauseCount');
document.getElementById('applauseBtn').addEventListener('click',()=>{ applause+=3; countEl.textContent=applause; burst(10); });

/* ===== Blueprint toggle ===== */
document.getElementById('bp').addEventListener('click',()=> document.body.classList.toggle('blueprint'));

/* ===== Laser level ===== */
const laser=document.getElementById('laser'); let laserOn=false;
document.getElementById('laserBtn').addEventListener('click',()=>{ laserOn=!laserOn; laser.style.display=laserOn?'block':'none'; });
window.addEventListener('pointermove',e=>{ if(laserOn){ laser.style.top=e.clientY+'px'; } });

/* ===== Measure tool ===== */
let measuring=false, p1=null, line=null, badge=null;
function clearMeasure(){ p1=null; line?.remove(); line=null; badge?.remove(); badge=null; }
document.getElementById('measureBtn').addEventListener('click',()=>{ measuring=!measuring; clearMeasure(); });
window.addEventListener('click',e=>{
  if(!measuring || e.target.closest('.card') || e.target.closest('.toolbelt') || e.target.closest('.modal')) return;
  if(!p1){ p1={x:e.clientX,y:e.clientY}; }
  else{
    const p2={x:e.clientX,y:e.clientY}, dx=p2.x-p1.x, dy=p2.y-p1.y, d=Math.hypot(dx,dy);
    const est=(d*0.15).toFixed(1); // fun scale ~0.15m per px
    line=document.createElement('div'); line.className='measure-line';
    const angle=Math.atan2(dy,dx); line.style.left=p1.x+'px'; line.style.top=p1.y+'px'; line.style.width=d+'px'; line.style.transform=`rotate(${angle}rad)`; document.body.appendChild(line);
    badge=document.createElement('div'); badge.className='measure-badge'; badge.textContent=`‚âà ${est} m`;
    badge.style.left=(p1.x+p2.x)/2+'px'; badge.style.top=(p1.y+p2.y)/2-24+'px'; document.body.appendChild(badge);
    setTimeout(clearMeasure, 3500); p1=null;
  }
});

/* ===== Markers ===== */
const MARK_SEQ=["üöß","üìç","üß±"]; let markIdx=0; let markMode=false;
document.getElementById('markerBtn').addEventListener('click',()=>{ markMode=!markMode; });
window.addEventListener('click',e=>{
  if(!markMode || e.target.closest('.card') || e.target.closest('.toolbelt') || e.target.closest('.modal')) return;
  const m=document.createElement('div'); m.className='marker'; m.textContent=MARK_SEQ[markIdx]; markIdx=(markIdx+1)%MARK_SEQ.length;
  m.style.left=e.clientX+'px'; m.style.top=e.clientY+'px'; document.body.appendChild(m);
});

/* ===== Crane hook drag + beam drop ===== */
const hook=document.getElementById('craneHook'); let dragging=false, offX=0;
hook.addEventListener('pointerdown',e=>{ dragging=true; hook.classList.add('drag'); offX=e.clientX - hook.getBoundingClientRect().left; hook.setPointerCapture(e.pointerId); });
hook.addEventListener('pointermove',e=>{ if(!dragging) return; const x=Math.min(innerWidth-40, Math.max(10, e.clientX-offX)); hook.style.left=x+'px'; });
hook.addEventListener('pointerup',()=>{ dragging=false; hook.classList.remove('drag'); });

document.getElementById('dropBtn').addEventListener('click',()=>{
  const hb=hook.getBoundingClientRect();
  const beam=document.createElement('div'); beam.className='beam'; beam.textContent='THANK YOU';
  beam.style.left=(hb.left-90)+'px'; beam.style.top=(hb.bottom+8)+'px'; document.body.appendChild(beam);
  // simple gravity
  let y=hb.bottom+8, vy=1, ground=innerHeight-80;
  const fall=()=>{ vy+=0.7; y+=vy; if(y>=ground){ y=ground; beam.style.top=y+'px'; sparkleAt(hb.left, y, "üëè","plus"); burst(6); return; } beam.style.top=y+'px'; requestAnimationFrame(fall); };
  fall();
});

/* ===== Burst helper ===== */
function burst(count=8){
  const mid=innerWidth/2;
  for(let i=0;i<count;i++){
    const xpx=mid+rand(-240,240), xvw=(xpx/innerWidth)*100;
    setTimeout(()=>makeEmoji(xvw, -60 - i*6), i*55);
  }
}

/* ===== Background sparkle ===== */
window.addEventListener('click',e=>{
  if(e.target.closest('.card') || e.target.closest('.toolbelt') || e.target.closest('.modal')) return;
  sparkleAt(e.clientX,e.clientY);
});

/* ===== Google Form feedback (direct submit) ===== */
const GF_ACTION="https://docs.google.com/forms/d/e/1FAIpQLSepDMrPMO7QyUpuBlqOZFUDsvVUg6XtiYh0G2eYARxeD-3cMA/formResponse";
const GF_FIELD="entry.1175385091";
const modal=document.getElementById('modal');
document.getElementById('feedbackBtn').addEventListener('click',()=> modal.style.display='flex');
document.getElementById('cancel').addEventListener('click',()=> modal.style.display='none');
document.getElementById('send').addEventListener('click',()=>{
  const v=document.getElementById('fbText').value.trim(); if(!v){ alert("Please write a quick note first."); return; }
  const form=document.createElement('form'); form.method='POST'; form.action=GF_ACTION; form.target='gform-target';
  const t=document.createElement('textarea'); t.name=GF_FIELD; t.value=`${v}\n\n‚Äî sent from: ${location.href}`; form.appendChild(t);
  document.body.appendChild(form); form.submit(); document.body.removeChild(form);
  alert("Thanks! Your feedback was sent ‚úÖ"); modal.style.display='none'; document.getElementById('fbText').value="";
});
</script>
</body>
</html>
