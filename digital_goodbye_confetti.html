<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>üéâ A Little Goodbye</title>
<meta name="color-scheme" content="dark light">
<style>
  :root{
    --bg1:#0f172a; --bg2:#1e293b;
    --card:#0b1220cc;
    --text:#e2e8f0; --muted:#cbd5e1; --border:#1f2a44;
    --accent:#30c48d; --accent-2:#22a3ff;
  }
  html,body{height:100%;margin:0}
  body{
    font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, "Helvetica Neue", Arial;
    color:var(--text);
    display:grid; place-items:center;
    background: radial-gradient(1200px 800px at 10% 10%, var(--bg2), var(--bg1));
    background-size: cover; background-position: center; background-attachment: fixed;
    overflow-x:hidden;
  }

  /* Main card */
  .card{
    position:relative; z-index:2; max-width:760px; width:min(92vw,760px);
    backdrop-filter: blur(12px);
    background: var(--card);
    border:1px solid var(--border); border-radius:20px;
    padding:28px 28px 22px;
    box-shadow:0 20px 40px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.05);
    transform: perspective(900px) rotateX(0) rotateY(0);
    transition: transform .12s ease-out;
  }
  h1{ font-size: clamp(28px,5vw,44px); margin:8px 0 14px; line-height:1.1; }
  .msg p{ font-size: clamp(16px,2.6vw,20px); opacity:.95; margin:0 0 12px; line-height:1.6; }
  .meta{ opacity:.8; font-size:14px; margin-top:10px; }
  .row{ display:flex; flex-wrap:wrap; gap:10px; margin-top:18px; }

  .btn{
    appearance:none; border:1px solid #334155; background:#0b1220; color:var(--text);
    padding:10px 14px; border-radius:12px; cursor:pointer; font-weight:600;
    transition: transform .08s ease, box-shadow .2s ease, border-color .2s ease, background .2s ease;
    text-decoration:none; display:inline-flex; align-items:center; gap:.5rem;
  }
  .btn:hover{ border-color:#475569; box-shadow:0 8px 20px rgba(0,0,0,.25); transform:translateY(-1px); }
  .btn.primary{ background: linear-gradient(90deg, var(--accent), var(--accent-2)); color:#081018; border:0; }
  .btn.primary:hover{ filter:brightness(1.05); }

  /* Popover */
  .popover{
    position:absolute; z-index:3; margin-top:8px; inset-inline-start:0;
    background:#0b1220f2; border:1px solid var(--border); border-radius:14px;
    padding:12px; box-shadow:0 16px 40px rgba(0,0,0,.45); backdrop-filter: blur(10px);
    min-width:280px; display:none;
  }
  .popover.open{ display:block; }
  .contact-line{ display:flex; align-items:center; gap:.5rem; font-size:14px; color:var(--muted); }
  .contact-line a{ color:#9bd3ff; text-decoration:none; }
  .contact-line a:hover{ text-decoration:underline; }

  /* Modal */
  .modal{ position:fixed; inset:0; display:none; z-index:20; align-items:center; justify-content:center; background:rgba(0,0,0,.45); padding:18px; }
  .modal.open{ display:flex; }
  .modal-card{
    width:min(92vw,640px); background:#0b1220; border:1px solid var(--border);
    border-radius:16px; padding:18px; box-shadow:0 24px 60px rgba(0,0,0,.5);
  }
  .modal-card h2{ margin:0 0 10px; font-size:20px; }
  textarea{
    width:100%; min-height:160px; resize:vertical;
    background:#0f172a; color:var(--text); border:1px solid #334155; border-radius:12px; padding:10px;
    font-family: inherit; font-size:14px;
  }
  .modal-actions{ margin-top:12px; display:flex; gap:10px; justify-content:flex-end; }

  /* Toast */
  .toast{
    position:fixed; left:50%; top:20px; transform:translateX(-50%) translateY(-8px);
    background:#0b1220f2; border:1px solid var(--border); border-radius:14px;
    padding:12px 14px; box-shadow:0 16px 40px rgba(0,0,0,.45); backdrop-filter: blur(10px);
    z-index:30; opacity:0; pointer-events:none; white-space:pre-wrap; text-align:center; min-width:260px;
    transition:opacity .25s ease, transform .25s ease;
  }
  .toast.show{ opacity:1; transform:translateX(-50%) translateY(0); }

  /* Emoji + sparkle */
  .emoji{ position:fixed; top:-60px; z-index:1; pointer-events:auto; user-select:none; }
  .emoji .inner{
    display:block; filter: drop-shadow(0 3px 6px rgba(0,0,0,.35));
    animation: sway 7.5s ease-in-out infinite;
    transition: transform .12s ease, opacity .2s ease;
    cursor:pointer;
  }
  .emoji .inner:hover{ transform: scale(1.12) }
  .emoji.pop .inner{ animation:none }
  @keyframes fall { to { transform: translateY(110vh); opacity:1; } }
  @keyframes sway { 0%{ transform: translateX(0) rotate(0deg); }
                    50%{ transform: translateX(var(--sx, 22px)) rotate(var(--rot, 10deg)); }
                    100%{ transform: translateX(0) rotate(0deg); } }
  @keyframes popAway { 0%{ transform: translateY(0) scale(1); opacity:1 }
                       60%{ transform: translateY(-18px) scale(1.35); opacity:.95 }
                       100%{ transform: translateY(-46px) scale(.6); opacity:0 } }
  .sparkle{
    position:fixed; z-index:3; pointer-events:none; color:#ffe08a; font-size:18px;
    filter: drop-shadow(0 2px 6px rgba(0,0,0,.35)); animation: sparkleUp .8s ease-out forwards;
  }
  @keyframes sparkleUp{ 0%{ transform: translateY(0) scale(.9); opacity:.95 }
                        100%{ transform: translateY(-28px) scale(1.1); opacity:0 } }

  /* NEW: round music FAB + slider */
  .music-fab{
    position:fixed; right:16px; bottom:16px; z-index:30;
    display:flex; align-items:center; gap:12px;
  }
  .music-btn{
    width:56px; height:56px; border-radius:50%;
    background: linear-gradient(135deg, var(--accent), var(--accent-2));
    color:#081018; border:0; cursor:pointer; font-size:26px;
    display:flex; align-items:center; justify-content:center;
    box-shadow:0 8px 20px rgba(0,0,0,.4);
    transition: transform .15s ease, filter .2s ease;
  }
  .music-btn:hover{ transform:scale(1.06); filter:brightness(1.05); }
  .music-slider{
    -webkit-appearance:none; width:140px; height:6px; outline:0;
    background:#0b1220cc; border:1px solid var(--border);
    border-radius:999px; box-shadow:0 4px 14px rgba(0,0,0,.25);
  }
  .music-slider::-webkit-slider-thumb{
    -webkit-appearance:none; width:16px; height:16px; border-radius:50%;
    background: var(--accent-2); border:0; box-shadow:0 1px 3px rgba(0,0,0,.4);
  }
  .music-slider::-moz-range-thumb{
    width:16px; height:16px; border-radius:50%;
    background: var(--accent-2); border:0; box-shadow:0 1px 3px rgba(0,0,0,.4);
  }
  .music-slider::-moz-range-track{
    height:6px; background:#0b1220cc; border:1px solid var(--border); border-radius:999px;
  }
</style>
</head>
<body>

<div class="card" id="card">
  <h1 id="title">Thank you, team!</h1>
  <div class="msg" id="message">
    <p>Hello everyone,</p>
    <p>I‚Äôm writing to share that I‚Äôll be leaving Laing O‚ÄôRourke to begin the next chapter of my career...</p>
    <p>If our paths cross in the future, I‚Äôd be delighted to work with you again...</p>
  </div>
  <p class="meta" id="signature">‚Äî Irfana</p>
  <div class="row">
    <button id="sendMsgBtn" class="btn primary">üí¨ Send message to Irfana</button>
    <div style="position:relative">
      <button id="contactBtn" class="btn">ü§ù Get in touch</button>
      <div id="contactPopover" class="popover">
        <div class="contact-line">üìß <span>Irfanasultana@hotmail.co.uk</span></div>
        <div class="contact-line">üîó <a href="https://www.linkedin.com/in/irfanasultana/" target="_blank">linkedin.com/in/irfanasultana</a></div>
      </div>
    </div>
  </div>
</div>

<div class="modal" id="modal">
  <div class="modal-card">
    <h2>üí¨ Send a message to Irfana</h2>
    <input type="text" id="fbName" placeholder="Enter your name" style="width:100%;margin-bottom:10px;padding:10px;border-radius:12px;border:1px solid #334155;background:#0f172a;color:var(--text)">
    <textarea id="fbText" placeholder="Write your message..."></textarea>
    <div class="modal-actions">
      <button id="cancel" class="btn">Cancel</button>
      <button id="send" class="btn primary">Send</button>
    </div>
  </div>
</div>

<div id="toast" class="toast"></div>

<!-- NEW music controls -->
<audio id="bgMusic" src="bg-music.mp3" preload="auto" loop></audio>
<div class="music-fab">
  <button class="music-btn" id="musicToggle" aria-pressed="false">üéµ</button>
  <input id="musicVol" class="music-slider" type="range" min="0" max="1" step="0.01" value="0.2">
</div>

<script>
/* keep your existing JS ... */

/* Toast stays for 20s */
function showToast(text){
  const t = document.getElementById('toast');
  t.textContent = text;
  t.classList.add('show');
  clearTimeout(showToast._timer);
  showToast._timer = setTimeout(()=> t.classList.remove('show'), 20000);
}

/* NEW music control logic */
const music  = document.getElementById('bgMusic');
const toggle = document.getElementById('musicToggle');
const volEl  = document.getElementById('musicVol');
const savedVolStr = localStorage.getItem('gb_music_vol');
const initialVol  = savedVolStr !== null ? Number(savedVolStr) : 0.2;
music.volume = Math.min(1, Math.max(0, initialVol));
volEl.value  = music.volume;
function setToggleUI(){
  const on = !music.paused;
  toggle.textContent = on ? '‚è∏' : 'üéµ';
  toggle.setAttribute('aria-pressed', String(on));
}
toggle.addEventListener('click', async ()=>{
  if (music.paused){
    try { await music.play(); localStorage.setItem('gb_music_on','1'); }
    catch(e){}
  } else {
    music.pause();
    localStorage.setItem('gb_music_on','0');
  }
  setToggleUI();
});
volEl.addEventListener('input', ()=>{
  music.volume = Number(volEl.value);
  localStorage.setItem('gb_music_vol', String(music.volume));
});
const savedOn = localStorage.getItem('gb_music_on') === '1';
const tryStart = async ()=>{
  if (savedOn && music.paused){
    try { await music.play(); } catch(e){}
    setToggleUI();
  }
  window.removeEventListener('pointerdown', tryStart);
  window.removeEventListener('keydown', tryStart);
};
window.addEventListener('pointerdown', tryStart, {once:true});
window.addEventListener('keydown', tryStart, {once:true});
setToggleUI();
</script>

</body>
</html>
